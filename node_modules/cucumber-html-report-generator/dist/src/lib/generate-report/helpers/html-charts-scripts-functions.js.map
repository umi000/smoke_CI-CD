{"version":3,"file":"html-charts-scripts-functions.js","sourceRoot":"","sources":["../../../../../src/lib/generate-report/helpers/html-charts-scripts-functions.ts"],"names":[],"mappings":";;;;;;AACA,uCAAiC;AACjC,0FAAwD;AAExD,MAAa,oBAAoB;IAI/B,YAAoB,KAAa;QAH1B,aAAQ,GAAuB,EAAE,CAAC;QAOlC,iBAAY,GAAG,GAAiB,EAAE,CAAC,CAAc;YACtD,UAAU,EAAE,IAAI;YAChB,QAAQ,EAAE,EACT;YACD,MAAM,EAAE;gBACN,OAAO,EAAE,KAAK;aACf;YACD,mBAAmB,EAAE,IAAI;YACzB,OAAO,EAAE;gBACP,KAAK,EAAE;oBACL,OAAO,EAAE,IAAI;oBACb,IAAI,EAAE,OAAO;oBACb,KAAK,EAAE,IAAI,CAAC,KAAK,KAAK,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS;oBACpD,OAAO,EAAE;wBACP,MAAM,EAAE,EAAE;wBACV,GAAG,EAAE,CAAC;qBACP;iBACF;gBACD,MAAM,EAAE;oBACN,OAAO,EAAE,KAAK;iBACf;gBACD,UAAU,EAAE;oBACV,KAAK,EAAE,SAAS;oBAChB,SAAS,EAAE,CAAE,KAAa,EAAkB,EAAE;wBAC5C,OAAO,MAAM,CAAE,KAAK,CAAE,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;oBAC1C,CAAC;iBACF;aACF;SACF,CAAA,CAAC;QAEK,uBAAkB,GAAG,GAAW,EAAE,CAAC,CAAQ;YAChD,EAAE,EAAE,wBAAwB;YAC5B,UAAU,EAAE,CAAE,KAAY,EAAS,EAAE;gBACnC,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC;gBACxB,MAAM,EAAE,MAAM,EAAE,GAAG,KAAK,CAAC;gBACzB,MAAM,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC;gBACtB,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAE,CAAE,KAAK,GAAG,GAAG,CAAC,WAAW,CAAE,KAAK,CAAC,OAAO,CAAC,QAAS,CAAC,IAAK,CAAE,CAAC,KAAK,CAAE,GAAG,CAAC,CAAE,CAAC;gBACnG,MAAM,KAAK,GAAG,CAAE,MAAM,GAAG,KAAK,CAAC,SAAS,CAAC,GAAG,CAAE,GAAG,CAAC,CAAC;gBAEnD,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,KAAK,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC;gBAC9D,GAAG,CAAC,QAAQ,CAAE,KAAK,CAAC,OAAO,CAAC,QAAS,CAAC,IAAK,EAAE,KAAK,EAAE,KAAK,CAAE,CAAC;gBAC5D,GAAG,CAAC,IAAI,EAAE,CAAC;YACb,CAAC;SACF,CAAA,CAAC;QAEK,kBAAa,GAAG,CAAE,SAAiB,EAAE,SAAoB,EAAE,YAA0B,EAAE,gBAAwB,EAAU,EAAE;YAChI,MAAM,MAAM,GAAsB,QAAQ,CAAC,cAAc,CAAE,SAAS,CAAE,CAAC;YACvE,MAAM,GAAG,GAAG,MAAM,CAAC,UAAU,CAAE,IAAI,CAAG,CAAC;YACvC,CAAE,YAAY,CAAC,QAAS,CAAE,CAAC,IAAI,GAAG,gBAAgB,CAAC;YAEnD,MAAM,KAAK,GAAG,IAAI,gBAAK,CAAE,GAAG,EAAE;gBAC5B,IAAI,EAAE,SAAS;gBACf,OAAO,EAAE,YAAY;gBACrB,OAAO,EAAE,CAAE,IAAI,CAAC,kBAAkB,EAAE,EAAE,mCAAe,CAAE;gBACvD,IAAI,EAAE,UAAU;aACjB,CAAE,CAAC;YAEJ,OAAO,KAAK,CAAC;QACf,CAAC,CAAC;QA7DA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACrB,CAAC;CA6DF;AAnED,oDAmEC","sourcesContent":["import type { ChartData, ChartOptions, Plugin } from 'chart.js';\nimport { Chart } from 'chart.js';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\n\nexport class HtmlScriptsFunctions {\n  public document: Document = <Document>{};\n  public theme: string;\n\n  public constructor( theme: string ) {\n    this.theme = theme;\n  }\n\n  public graphOptions = (): ChartOptions => <ChartOptions>{\n    responsive: true,\n    elements: {\n    },\n    legend: {\n      display: false\n    },\n    maintainAspectRatio: true,\n    plugins: {\n      title: {\n        display: true,\n        text: 'Chart',\n        color: this.theme === 'Dark' ? '#73879c' : '#73879c',\n        padding: {\n          bottom: 20,\n          top: 3\n        }\n      },\n      legend: {\n        display: false\n      },\n      datalabels: {\n        color: '#ffffff',\n        formatter: ( value: string ): string | null => {\n          return Number( value ) > 0 ? value : '';\n        }\n      }\n    },\n  };\n\n  public writeValueInCenter = (): Plugin => <Plugin>{\n    id: 'paint_number_in_center',\n    beforeDraw: ( chart: Chart ): void => {\n      const { width } = chart;\n      const { height } = chart;\n      const ctx = chart.ctx;\n      const textX = Math.round( ( width - ctx.measureText( chart.options.elements!.text! ).width ) / 2 );\n      const textY = ( height + chart.chartArea.top ) / 2;\n\n      ctx.fillStyle = this.theme === 'Dark' ? '#73879c' : '#73879c';\n      ctx.fillText( chart.options.elements!.text!, textX, textY );\n      ctx.save();\n    }\n  };\n\n  public generateChart = ( chartName: string, chartData: ChartData, graphOptions: ChartOptions, chartCenterValue: string ): Chart => {\n    const canvas = <HTMLCanvasElement>document.getElementById( chartName );\n    const ctx = canvas.getContext( '2d' )!;\n    ( graphOptions.elements! ).text = chartCenterValue;\n\n    const chart = new Chart( ctx, {\n      data: chartData,\n      options: graphOptions,\n      plugins: [ this.writeValueInCenter(), ChartDataLabels ],\n      type: 'doughnut'\n    } );\n\n    return chart;\n  };\n}\n"]}